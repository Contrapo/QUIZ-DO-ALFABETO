// Definição das perguntas e respostas
const questionsAndAnswers = [
  
{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA A ?",
      options: ["ABACAXI", "BANANA", "CENOURA", "UVA"],
      correctAnswer: "ABACAXI" },
      
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA A ?",
      options: ["TERRA", "BOLA", "ÁGUA", "FOCA"],
      correctAnswer: "ÁGUA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA A ?",
      options: ["AVIÃO", "HAMBÚRGUER", "FITA", "CACHORRO"],
      correctAnswer: "AVIÃO" }
  ]
},
  
{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA B ?",
      options: ["PIRULITO", "BOLA", "CACHORRO", "LEÃO"],
      correctAnswer: "BOLA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA B ?",
      options: ["FACEBOOK", "DENTE", "BARCO", "ELEFANTE"],
      correctAnswer: "BARCO" },
      
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA B ?",
      options: ["MOUSE", "BOLO", "LOBO", "PORTA"],
      correctAnswer: "BOLO" }
  ]
},
  
{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA C ?", 
      options: ["AVIÃO", "KETCHUP", "CARRO", "XÍCARA"], 
      correctAnswer: "CARRO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA C ?", 
      options: ["CACHOEIRA", "QUEIJO", "BALDE", "MACARRÃO"], 
      correctAnswer: "CACHOEIRA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA C ?", 
      options: ["JANELA", "COMPUTADOR", "VACA", "ARROZ"], 
      correctAnswer: "COMPUTADOR" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA D ?", 
      options: ["BARCO", "DADO", "ELEFANTE", "FOCA"], 
      correctAnswer: "DADO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA D ?", 
      options: ["LANTERNA", "NUVEMS", "DENTE", "RATOEIRA"], 
      correctAnswer: "DENTE" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA D ?", 
      options: ["GATO", "COMPUTADOR", "DINAMITE", "HELICÓPTERO"], 
      correctAnswer: "DINAMITE" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA E ?", 
      options: ["COBRA", "ELEFANTE", "FLOR", "HELICÓPTERO"], 
      correctAnswer: "ELEFANTE" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA E ?", 
      options: ["RELÓGIO", "ESTRELA", "NOTEBOOK", "RATO"], 
      correctAnswer: "ESTRELA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA E ?", 
      options: ["CACHORRO", "SOFÁ", "ESPADA", "LUA"], 
      correctAnswer: "ESPADA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA F ?", 
      options: [ "CAMINHÃO", "GARRAFA", "TECLADO", "FITA"],
      correctAnswer: "FITA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA F ?", 
      options: ["IGREJA", "FLOR", "CELULAR", "PATO"], 
      correctAnswer: "FLOR" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA F ?", 
      options: ["BANANA", "UVA", "FOCA", "RÁDIO"], 
      correctAnswer: "FOCA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA G ?", 
      options: ["GATO", "MOTO", "CACHORRO", "JATO"],
      correctAnswer: "GATO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA G ?", 
      options: ["TIJOLO", "GARRAFA", "NOTEBOOK", "YOUTUBE"], 
      correctAnswer: "GARRAFA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA G ?", 
      options: ["SUCO", "SEREIA", "GALINHA", "PERFUME"], 
      correctAnswer: "GALINHA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA H ?", 
      options: ["MOUSE", "CADERNO", "HAMBÚRGUER", "DENTE"],
      correctAnswer: "HAMBÚRGUER"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA H ?", 
      options: ["SOL", "HELICÓPTERO", "DINAMITE", "CONTROLE"], 
      correctAnswer: "HELICÓPTERO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA H ?", 
      options: ["ZEBRA", "VESTIDO", "HOSPITAL", "WI-FI"], 
      correctAnswer: "HOSPITAL" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA I ?", 
      options: ["ESTRELA", "BOTÃO", "MOTO", "IGREJA"],
      correctAnswer: "IGREJA"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA I ?", 
      options: ["SOL", "HELICÓPTERO", "GALINHA", "INSTAGRAM"], 
      correctAnswer: "INSTAGRAM" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA I ?", 
      options: ["IMÃ", "UNICÓRNIO", "COELHO", "CAMINHÃO"], 
      correctAnswer: "IMÃ" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA J ?", 
      options: ["BOLO", "CELULAR", "COMPUTADOR", "JATO"],
      correctAnswer: "JATO"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA J ?", 
      options: ["CAMA", "JANELA", "CAVALO", "GATO"], 
      correctAnswer: "JANELA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA J ?", 
      options: ["JACARÉ", "FOGO", "HOSPITAL", "CARRO"], 
      correctAnswer: "JACARÉ" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA K ?",
      options: ["PENTE", "KETCHUP", "ÁGUA", "IGREJA"],
      correctAnswer: "KETCHUP"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA K ?", 
      options: ["PENTE", "KIWI", "LIQUIDIFICADOR", "CASA"], 
      correctAnswer: "KIWI" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA K ?", 
      options: ["CAFÉ", "KART", "CENOURA", "COBERTOR"], 
      correctAnswer: "KART" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA L ?", 
      options: ["TERRA", "TIJOLO" ,"SUCO" ,"LUA"],
      correctAnswer: "LUA"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA L ?", 
      options: ["MOUSE", "LEÃO", "CAVALO", "ACAMPAMENTO"], 
      correctAnswer: "LEÃO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA L ?", 
      options: ["LOBO", "UNICÓRNIO", "ABACAXI", "AVIÃO"], 
      correctAnswer: "LOBO" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA M ?", 
      options: ["SOFÁ", "TELEVISÃO", "NOTEBOOK", "MACARRÃO"],
      correctAnswer: "MACARRÃO"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA M ?", 
      options: ["MOTO", "FOCA", "FOGO", "ÁGUA"], 
      correctAnswer: "MOTO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA M ?", 
      options: ["COMPUTADOR", "MOUSE", "UVA", "KIWI"], 
      correctAnswer: "MOUSE" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA N ?", 
      options: ["NARIZ", "COELHO", "ACAMPAMENTO", "IGREJA"],
      correctAnswer: "NARIZ"}, 

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA N ?", 
      options: ["NUVENS", "JACARÉ", "PORTA", "FLOR"], 
      correctAnswer: "NUVENS" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA N ?", 
      options: ["CACTO", "PIRULITO", "NOTEBOOK", "KART"], 
      correctAnswer: "NOTEBOOK" }
  ]
},

{ variants: [
    { question: "QQUAL DAS FIGURAS COMEÇA COM A LETRA O ?", 
      options: ["OLHO", "CAMA", "COBERTOR", "TRAVESSEIRO"],
      correctAnswer: "OLHO"},  

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA O ?", 
      options: ["OVELHA", "TIGRE", "LIVRO", "ACAMPAMENTO"], 
      correctAnswer: "OVELHA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA O ?", 
      options: ["LOBO", "TATU", "OVOS", "UNICÓRNIO"], 
      correctAnswer: "OVOS" }
  ]
},


{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA P ?", 
      options: ["CACTO", "PATO", "URSO", "SABONETE"],
      correctAnswer: "PATO"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA P ?", 
      options: ["PERFUME", "KETCHUP", "IMÃ", "CACHOEIRA"], 
      correctAnswer: "PERFUME" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA P ?", 
      options: ["BOLO", "MESA", "PÁSSARO", "JATO"], 
      correctAnswer: "PÁSSARO" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Q ?", 
      options: ["CACHOEIRA", "RÁDIO", "QUEIJO", "CAFÉ"],
      correctAnswer: "QUEIJO"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Q ?", 
      options: ["BARCO", "QUADRO", "ESPADA", "YOUTUBE"], 
      correctAnswer: "QUADRO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Q ?", 
      options: ["QUADRICICLO", "SEREIA", "OVELHA", "LUA"], 
      correctAnswer: "QUADRICICLO" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA R ?", 
      options: ["BANCO", "LANTERNA", "BARCO", "RATO"],
      correctAnswer: "RATO"}, 

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA R ?", 
      options: ["RELÓGIO", "NARIZ", "SUCO", "GARRAFA"], 
      correctAnswer: "RELÓGIO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA R ?", 
      options: ["TIGRE", "RÁDIO", "CADERNO", "CACTO"], 
      correctAnswer: "RÁDIO" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA S ?", 
      options: ["CAVALO", "LOBO", "SEREIA", "DINAMITE"],
      correctAnswer: "SEREIA"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA S ?", 
      options: ["MOTO", "SOL", "QUADRICICLO", "COELHO"], 
      correctAnswer: "SOL" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA S ?", 
      options: ["CASA", "IGREJA", "SABONETE", "DENTE"], 
      correctAnswer: "SABONETE" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA T ?", 
      options: ["CONTROLE", "SOL", "BOTÃO", "TATU"],
        correctAnswer: "TATU"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA T ?", 
      options: ["TIGRE", "LEÃO", "GATO", "JACARÉ"], 
      correctAnswer: "TIGRE" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA T ?", 
      options: ["LEÃO", "PATO", "TERRA", "JANELA"], 
      correctAnswer: "TERRA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA U ?", 
      options: ["URSO", "TELEVISÃO", "ÁGUA", "IGREJA"],
      correctAnswer: "URSO"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA U ?", 
      options: ["QUADRO", "UVA", "CACTO", "CONTROLE"], 
      correctAnswer: "UVA" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA U ?", 
      options: ["NARIZ", "HELICÓPTERO", "UNICÓRNIO", "OVOS"], 
      correctAnswer: "UNICÓRNIO" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA V ?", 
      options: ["VACA", "LIQUIDIFICADOR", "RÁDIO", "LIVRO"],
      correctAnswer: "VACA"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA V ?", 
      options: ["ESTRELA", "VESTIDO", "ARROZ", "FOGO"], 
      correctAnswer: "VESTIDO" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA V ?", 
      options: ["TECLADO", "PÁSSARO", "VELA", "OLHO"], 
      correctAnswer: "VELA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA W ?", 
      options: ["CAMA", "CELULAR", "TECLADO", "WEBCAM"],
      correctAnswer: "WEBCAM"}, 

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA W ?", 
      options: ["BALDE", "WI-FI", "ELEFANTE", "COMPUTADOR"], 
      correctAnswer: "WI-FI" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA W ?", 
      options: ["VESTIDO", "TIJOLO", "WAFFLE", "LANTERNA"], 
      correctAnswer: "WAFFLE" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA X ?", 
      options: ["XÍCARA", "TELEVISÃO", "CARRO", "MESA"],
      correctAnswer: "XÍCARA"}, 

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA X ?", 
      options: ["HAMBÚRGUER", "XADREZ", "CACHORRO", "CAFÉ"], 
      correctAnswer: "XADREZ" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA X ?", 
      options: ["UNICÓRNIO", "VELA", "XERIFE", "RATOEIRA"], 
      correctAnswer: "XERIFE" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Y ", 
      options: ["PERFUME", "FACEBOOK", "NUVEMS", "YOUTUBE"],
      correctAnswer: "YOUTUBE"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Y ?", 
      options: ["SEREIA", "YIN YANG", "UNICÓRNIO", "OVELHA"], 
      correctAnswer: "YIN YANG" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Y ?", 
      options: ["WI-FI", "COBERTOR", "YOGA", "CELULAR"], 
      correctAnswer: "YOGA" }
  ]
},

{ variants: [
    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Z ?", 
      options: ["URSO", "TIGRE", "ARROZ", "ZEBRA"],
      correctAnswer: "ZEBRA"},

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Z ?", 
      options: ["SUCO", "ZEPELIM", "SABONETE", "ESTRELA"], 
      correctAnswer: "ZEPELIM" },

    { question: "QUAL DAS FIGURAS COMEÇA COM A LETRA Z ?", 
      options: ["VELA", "CASA", "ZOOLÓGICO", "HOSPITAL"], 
      correctAnswer: "ZOOLÓGICO" }
  ]
},

];

// Variáveis globais
let username = "";
let currentQuestionIndex = 0;
let correctAnswerIndices = [];
let nextButton;
let selectedQuestions = [];

function BotaoPlay() {
  // Seleciona os elementos
  var TelaPlayJanela = document.getElementById('TelaPlayJanela');
  var JanelaNome = document.getElementById('JanelaNome');
  var BLOCOS = document.getElementById('BLOCOS');
  
  // Faz o botão sumir
  TelaPlayJanela.style.display = 'none';
  
  // Faz a janela do nome aparecer
  JanelaNome.classList.remove('hidden');

  // Faz os bloquinhos de letras sumirem
  BLOCOS.classList.add('hidden');
}

// Função para iniciar o quiz
function startQuiz() {

  // Obter o nome digitado pelo usuário
  const usernameInput = document.getElementById('username');
  username = usernameInput.value;

  // Verificar se o usuário inseriu um nome
  if (!username.trim()) {

    // ID do botão de começar
    const NameButton = document.getElementById('Name-Button');

    // Tocar um bzz bzz quando for clicado
    playSound("NOPE.mp3");
    
    // Adicionar classe 'shake-and-flash' para animação de piscar e sacudir
    NameButton.classList.add('shake-and-flash');

    // Remover a classe após a animação (350ms)
    setTimeout(() => {
      NameButton.classList.remove('shake-and-flash');
    }, 350);


    Toastify({
      text: "Você precisa escrever seu nome!",
      duration: 3000,
      close: false,
      gravity: "top",
      position: "center",
      stopOnFocus: true,
      style: {
        background: "#81007b",
      },
    }).showToast();
    return;
  }

  var QuizTodo = document.getElementById('Quiz-Todo');
  QuizTodo.classList.remove('hidden');
  JanelaNome.classList.add('hidden');

  // Ocultar tela de entrada de nome e mostrar o quiz
  const nameInput = document.getElementById('name-input');
  nameInput.style.display = 'none';

  const quiz = document.getElementById('quiz');
  quiz.style.display = 'block';

  // Desocultar a div .janela-quiz caso o jogo tenha reiniciado
  const janelaQuiz = document.querySelector('.janela-quiz');
  janelaQuiz.style.display = 'flex';

  // Resetar a barra de progresso e mostrá-la
  const progressBar = document.getElementById('progress-bar');
  progressBar.style.width = '0%';
  progressBar.parentElement.style.display = 'block';

  // Selecionar aleatoriamente uma variante de cada pergunta
  selectedQuestions = questionsAndAnswers.map(questionGroup => {
    return questionGroup.variants[Math.floor(Math.random() * questionGroup.variants.length)];
  });

  // Embaralhar as opções de resposta
  selectedQuestions.forEach(question => {
    question.options = shuffleArray(question.options);
  });

  // Mostrar a primeira pergunta
  showQuestion();
}

// Função para exibir a próxima pergunta
function nextQuestion() {
  // Verificar se o usuário selecionou uma opção
  const selectedOption = document.querySelector('.option.selected');
  if (!selectedOption) {

    // Tocar um bzz bzz quando for clicado
    playSound("NOPE.mp3");
    
    // Adicionar classe 'shake-and-flash' para animação de piscar e sacudir
    nextButton.classList.add('shake-and-flash');

    // Remover a classe após a animação (350ms)
    setTimeout(() => {
      nextButton.classList.remove('shake-and-flash');
    }, 350);

    Toastify({
      text: "Você precisa escolher uma das opções!",
      duration: 3000,
      close: false,
      gravity: "top",
      position: "center",
      stopOnFocus: true,
      style: {
        background: "#ff4545",
      },
    }).showToast();

    return;
  }

  // Adicionar classe 'flip' para animação de virar a opção selecionada
  selectedOption.classList.add('flip');

  // Desabilitar o botão "AVANÇAR" durante a transição
  nextButton.disabled = true;

  // Aguardar a animação de flip
  setTimeout(() => {
    // Mostrar o texto escondido da alternativa
    const backElement = selectedOption.querySelector('.back');
    backElement.style.display = 'block';

    // Verificar se a opção selecionada é a correta
    const currentQuestion = selectedQuestions[currentQuestionIndex];
    const userAnswer = selectedOption.querySelector('img').alt; // Obtém o texto da opção selecionada
    if (userAnswer === currentQuestion.correctAnswer) {
      // Tocar som de "Acertou" se a resposta estiver correta
      playSound("ACERTOU.mp3");
      // Adicionar classe 'correct' à opção selecionada
      selectedOption.classList.add('correct');
      // Salvar o índice da pergunta respondida corretamente
      correctAnswerIndices.push(currentQuestionIndex);
    } else {
      // Tocar som de "Errou" se a resposta estiver errada
      playSound("ERROU.mp3");
      // Adicionar classe 'wrong' à opção selecionada
      selectedOption.classList.add('wrong');
    }

    // Aguardar a animação de piscar
    setTimeout(() => {
      // Remover a classe 'selected' da opção selecionada
      selectedOption.classList.remove('selected', 'flip', 'correct', 'wrong');

      // Próxima pergunta
      currentQuestionIndex++;
      if (currentQuestionIndex < selectedQuestions.length) {
        showQuestion();
      } else {
        showScore();
      }

      // Reativar o botão "AVANÇAR" após a transição
      nextButton.disabled = false;
    }, 1500); // Duração da animação de piscar
  }, 800); // Duração da animação de flip
}

// Função para exibir uma pergunta
function showQuestion() {
  const questionElement = document.getElementById('question');
  const optionsElement = document.getElementById('options');
  const currentQuestion = selectedQuestions[currentQuestionIndex];

  questionElement.innerText = currentQuestion.question;
  optionsElement.innerHTML = "";

  currentQuestion.options.forEach(option => {
    const optionElement = document.createElement('div');
    optionElement.classList.add('option', 'flip-container');
    const flipperElement = document.createElement('div');
    flipperElement.classList.add('flipper');

    const frontElement = document.createElement('div');
    frontElement.classList.add('front');
    const optionImage = new Image();
    optionImage.src = `IMAGENS/QUIZ/${option}.png`;
    optionImage.alt = option;
    optionImage.dataset.text = option; // Armazena o texto da opção
    frontElement.appendChild(optionImage);

    const backElement = document.createElement('div');
    backElement.classList.add('back');
    backElement.innerText = option;
    backElement.style.display = 'none'; // Esconde o texto inicialmente

    flipperElement.appendChild(frontElement);
    flipperElement.appendChild(backElement);
    optionElement.appendChild(flipperElement);

    optionElement.addEventListener('click', () => selectOption(optionElement));
    optionsElement.appendChild(optionElement);
  });

  // Atualizar a barra de progresso
  updateProgressBar();
}

// Função para selecionar uma opção
function selectOption(optionElement) {
  const selectedOption = document.querySelector('.option.selected');
  if (selectedOption) {
      selectedOption.classList.remove('selected');
  }
  optionElement.classList.add('selected');
}

// Função para exibir a pontuação final
function showFinalScore() {

  // Atualizar a barra de progresso
  updateProgressBar();
  
  // Ocultar o quiz
  const quiz = document.getElementById('quiz');
  quiz.style.display = 'none';

  // Exibir tela de resultados finais
  const scoreScreen = document.getElementById('score-screen');
  scoreScreen.style.display = 'block';

  // Exibir pontuação final
  const scoreDetails = document.getElementById('score-details');
  scoreDetails.innerText = `${username}, você acertou ${correctAnswerIndices.length} de ${questionsAndAnswers.length} perguntas.`;
}

  // Função para atualizar a barra de progresso
  function updateProgressBar() {
    const progressBar = document.getElementById('progress-bar');
    const progress = (currentQuestionIndex / questionsAndAnswers.length) * 100;
    progressBar.style.width = `${progress}%`;
  }

// Função para selecionar uma opção
function selectOption(optionElement) {
  const selectedOption = document.querySelector('.option.selected');
  if (selectedOption) {
    selectedOption.classList.remove('selected');
  }
  optionElement.classList.add('selected');
}

// Função para mostrar a pontuação
function showScore() {

  playSound("PALMAS.mp3");

  const quiz = document.getElementById('quiz');
  const scoreScreen = document.getElementById('score-screen');
  const scoreDetails = document.getElementById('score-details');

  quiz.style.display = 'none';
  scoreScreen.style.display = 'block';

  scoreDetails.innerHTML = `
    <p>${username}, você acertou ${correctAnswerIndices.length} de ${questionsAndAnswers.length} perguntas!</p>`;

    const progressBar = document.getElementById('progress-bar');
    progressBar.style.width = '98.6%';
}

// Função para reiniciar o quiz
function restartQuiz() {
  // Reiniciar as variáveis
  username = "";
  currentQuestionIndex = 0;
  correctAnswerIndices = [];

  // Ocultar tela de resultados finais e mostrar a tela de entrada de nome novamente
  const scoreScreen = document.getElementById('score-screen');
  scoreScreen.style.display = 'none';
  
  const nameInput = document.getElementById('name-input');
  nameInput.style.display = 'block';

  // Mostrar a tela de play novamente
  const TelaPlayJanela = document.getElementById('TelaPlayJanela');
  TelaPlayJanela.style.display = 'block';

  // Desocultar a div .janela-quiz caso o jogo tenha reiniciado
  const janelaQuiz = document.querySelector('.janela-quiz');
  janelaQuiz.style.display = 'none';

  // Resetar a barra de progresso e escondê-la
  const progressBar = document.getElementById('progress-bar');
  progressBar.style.width = '0%';
  progressBar.parentElement.style.display = 'none';

  BLOCOS.classList.remove('hidden');
}

// Função para tocar som
function playSound(filename) {
  const audio = new Audio(`SONS/${filename}`);
  audio.play();
}

// Função para embaralhar o array de opções
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// Inicializar a variável nextButton ao carregar o documento
document.addEventListener('DOMContentLoaded', () => {
  nextButton = document.getElementById('next-btn');
});
